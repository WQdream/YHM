import{p as oe}from"./print-js-Cg2APO4y.js";import{t as ae}from"./js-table2excel-CKeE7OgW.js";import{S as ne}from"./sortablejs-BS5toX6s.js";import{s as le}from"./pinia-3Y-g9T3w.js";import{u as re}from"./index-COET3g9w.js";import{a as ie}from"./element-plus-DWwQNvQX.js";import{d as I,e as se,_ as ce,j as v,ah as p,ap as pe,o as n,c as f,Q as de,O as g,P as d,V as l,S as _,F as x,a8 as z,K as me,T as V,U as T,L as he,a as C,n as ue,bm as ge,bk as fe}from"./@vue-CRXw13tJ.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@intlify-COHHyPI8.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CMApDvaE.js";import"./vue-i18n-UifYAxCp.js";import"./vue-CvYTPyMZ.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-CaTblHBU.js";import"./nprogress-Bx-CsPDi.js";import"./axios-Cm0UX6qg.js";import"./qs-Bc-_vL76.js";import"./side-channel-nON-R0av.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-CZY0DhK8.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CHRrmJ9o.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-CFfwrCfM.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CphgU6An.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-FEUMNzka.js";const ye=r=>(ge("data-v-e4c3f7b6"),r=r(),fe(),r),ke={class:"table-container"},_e={class:"table-footer mt15"},Ce={class:"table-footer-tool"},we={class:"tool-box"},Se=["data-key"],xe=ye(()=>C("i",{class:"fa fa-arrows-alt handle cursor-pointer"},null,-1)),ve=I({name:"netxTable"}),ze=I({...ve,props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},ontab:{type:Array,default:()=>[]},ontabWidth:{type:Number,default:()=>200},config:{type:Object,default:()=>{}},printName:{type:String,default:()=>""}},emits:["delRow","pageChange","sortHeader"],setup(r,{expose:L,emit:A}){const i=r,b=A,$=se(),E=re(),{themeConfig:U}=le(E),a=ce({page:{pageNum:1,pageSize:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),B=v(()=>!!i.config.isBorder),w=v(()=>i.config),j=v(()=>i.header.filter(o=>o.isCheck)),R=o=>{o?i.header.forEach(t=>t.isCheck=!0):i.header.forEach(t=>t.isCheck=!1),a.checkListIndeterminate=!1},H=()=>{const o=i.header.filter(t=>t.isCheck).length;a.checkListAll=o===i.header.length,a.checkListIndeterminate=o>0&&o<i.header.length},D=o=>{a.selectlist=o},N=(o,t)=>{b(o,t)},P=o=>{a.page.pageSize=o,b("pageChange",a.page)},O=o=>{a.page.pageNum=o,b("pageChange",a.page)},W=()=>{a.page.pageNum=1,a.page.pageSize=10,b("pageChange",a.page)},q=()=>{let o="",t="",s={};i.header.forEach(m=>{o+=`<th class="table-th">${m.title}</th>`}),i.data.forEach((m,h)=>{s[h]||(s[h]=[]),i.header.forEach(u=>{u.type==="text"?s[h].push(`<td class="table-th table-center">${m[u.key]}</td>`):u.type==="image"&&s[h].push(`<td class="table-th table-center"><img src="${m[u.key]}" style="width:${u.width}px;height:${u.height}px;"/></td>`)}),t+=`<tr>${s[h].join("")}</tr>`}),oe({printable:`<div style=display:flex;flex-direction:column;text-align:center><h3>${i.printName}</h3></div><table border=1 cellspacing=0><tr>${o}${t}</table>`,type:"raw-html",css:["//at.alicdn.com/t/c/font_2298093_rnp72ifj3ba.css","//unpkg.com/element-plus/dist/index.css"],style:"@media print{.mb15{margin-bottom:15px;}.el-button--small i.iconfont{font-size: 12px !important;margin-right: 5px;}}; .table-th{word-break: break-all;white-space: pre-wrap;}.table-center{text-align: center;}"})},F=()=>{if(a.selectlist.length<=0)return ie.warning("请先选择要导出的数据");ae(i.header,a.selectlist,`${U.value.globalTitle} ${new Date().toLocaleString()}`)},J=()=>{b("pageChange",a.page)},K=()=>{ue(()=>{const o=ne.create($.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const t=[];o.toArray().forEach(s=>{i.header.forEach(m=>{m.key===s&&t.push({...m})})}),b("sortHeader",t)}})})};return L({pageReset:W}),(o,t)=>{const s=p("el-table-column"),m=p("el-image"),h=p("el-button"),u=p("el-popconfirm"),M=p("el-empty"),Q=p("el-table"),G=p("el-pagination"),y=p("SvgIcon"),X=p("el-tooltip"),S=p("el-checkbox"),Y=p("el-scrollbar"),Z=p("el-popover"),ee=pe("loading");return n(),f("div",ke,[de((n(),g(Q,he({data:r.data,border:B.value},o.$attrs,{"row-key":"id",stripe:"",style:{width:"100%"},onSelectionChange:D}),{empty:d(()=>[l(M,{description:"暂无数据"})]),default:d(()=>[r.config.isSelection?(n(),g(s,{key:0,type:"selection","reserve-selection":!0,width:"30"})):_("",!0),r.config.isSerialNo?(n(),g(s,{key:1,type:"index",label:"序号",width:"60"})):_("",!0),(n(!0),f(x,null,z(j.value,(e,c)=>(n(),g(s,{key:c,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title},{default:d(k=>[e.type==="image"?(n(),g(m,{key:0,style:me({width:`${e.width}px`,height:`${e.height}px`}),src:k.row[e.key],"zoom-rate":1.2,"preview-src-list":[k.row[e.key]],"preview-teleported":"",fit:"cover"},null,8,["style","src","preview-src-list"])):(n(),f(x,{key:1},[V(T(k.row[e.key]),1)],64))]),_:2},1032,["prop","width","label"]))),128)),r.config.isOperate?(n(),g(s,{key:2,label:"操作",width:r.ontabWidth},{default:d(e=>[(n(!0),f(x,null,z(r.ontab,(c,k)=>(n(),f("span",{key:k,style:{"margin-right":"15px"}},[c.name=="删除"?(n(),g(u,{key:0,title:"确定删除吗？",onConfirm:te=>N(c.method,e.row)},{reference:d(()=>[l(h,{type:c.type,size:"mini"},{default:d(()=>[V(T(c.name),1)]),_:2},1032,["type"])]),_:2},1032,["onConfirm"])):_("",!0),c.name!=="删除"?(n(),g(h,{key:1,type:c.type,size:"mini",onClick:te=>N(c.method,e.row)},{default:d(()=>[V(T(c.name),1)]),_:2},1032,["type","onClick"])):_("",!0)]))),128))]),_:1},8,["width"])):_("",!0)]),_:1},16,["data","border"])),[[ee,r.config.loading]]),C("div",_e,[l(G,{"current-page":a.page.pageNum,"onUpdate:currentPage":t[0]||(t[0]=e=>a.page.pageNum=e),"page-size":a.page.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>a.page.pageSize=e),"pager-count":5,"page-sizes":[10,20,30],total:r.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:P,onCurrentChange:O},null,8,["current-page","page-size","total"]),C("div",Ce,[l(y,{name:"iconfont icon-dayin",size:19,title:"打印",onClick:q}),l(y,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:F}),l(y,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:J}),l(Z,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:K},{reference:d(()=>[l(y,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})]),default:d(()=>[C("div",we,[l(X,{content:"拖动进行排序",placement:"top-start"},{default:d(()=>[l(y,{name:"fa fa-question-circle-o",size:17,class:"ml11",color:"#909399"})]),_:1}),l(S,{modelValue:a.checkListAll,"onUpdate:modelValue":t[2]||(t[2]=e=>a.checkListAll=e),indeterminate:a.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:R},null,8,["modelValue","indeterminate"]),l(S,{modelValue:w.value.isSerialNo,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value.isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),l(S,{modelValue:w.value.isSelection,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value.isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),l(Y,null,{default:d(()=>[C("div",{ref_key:"toolSetRef",ref:$,class:"tool-sortable"},[(n(!0),f(x,null,z(r.header,e=>(n(),f("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[xe,l(S,{modelValue:e.isCheck,"onUpdate:modelValue":c=>e.isCheck=c,size:"default",class:"ml12 mr8",label:e.title,onChange:H},null,8,["modelValue","onUpdate:modelValue","label"])],8,Se))),128))],512)]),_:1})]),_:1})])])])}}}),ft=be(ze,[["__scopeId","data-v-e4c3f7b6"]]);export{ft as default};
