function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/index-DtDxiKTR.js","assets/js/pinia-3Y-g9T3w.js","assets/js/vue-demi-Dq6ymT-8.js","assets/js/@vue-CRXw13tJ.js","assets/js/index-GRqcnNh1.js","assets/js/vue-router-CMApDvaE.js","assets/js/vue-i18n-UifYAxCp.js","assets/js/@intlify-COHHyPI8.js","assets/js/vue-CvYTPyMZ.js","assets/js/js-cookie-Cz0CWeBA.js","assets/js/@element-plus-CaTblHBU.js","assets/js/nprogress-Bx-CsPDi.js","assets/css/nprogress-BUMXTAWU.css","assets/js/axios-Cm0UX6qg.js","assets/js/qs-Bc-_vL76.js","assets/js/side-channel-nON-R0av.js","assets/js/get-intrinsic-B1Ut8WxJ.js","assets/js/es-errors-DzOT6E3C.js","assets/js/has-symbols-eVqrYdw7.js","assets/js/has-proto-JnoBQRdH.js","assets/js/function-bind-B8G-TZ45.js","assets/js/hasown-B9bXSDSU.js","assets/js/call-bind-Aj7T_c8u.js","assets/js/set-function-length-Ct5B6P4y.js","assets/js/define-data-property-CUxyvwXF.js","assets/js/es-define-property-28jGrh5V.js","assets/js/gopd-O61WwtTx.js","assets/js/has-property-descriptors-Cvfij9iw.js","assets/js/object-inspect-CZY0DhK8.js","assets/js/element-plus-DWwQNvQX.js","assets/js/lodash-es-WEemOz_S.js","assets/js/@vueuse-CFfwrCfM.js","assets/js/@popperjs-D9SI2xQl.js","assets/js/@ctrl-r5W6hzzQ.js","assets/js/dayjs-CphgU6An.js","assets/js/async-validator-DKvM95Vc.js","assets/js/memoize-one-BdPwpGay.js","assets/js/normalize-wheel-es-B6fDCfyv.js","assets/js/@floating-ui-FEUMNzka.js","assets/js/mitt-DJ65BbbF.js","assets/js/vue-grid-layout-CHRrmJ9o.js","assets/css/index-CIzDQE2V.css","assets/js/_plugin-vue_export-helper-DlAUqK2U.js","assets/css/index-BZJJuctR.css","assets/js/index-GnCwDMVb.js","assets/css/index-BAmBN7UD.css","assets/js/index-D8wnD-Jt.js","assets/js/help-bY6Nrk7z.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{a as we,u as ge,_ as g}from"./index-GRqcnNh1.js";import{d as $,e as f,_ as ke,i as _e,Z as je,ah as z,o as u,c as p,S as ye,a as r,V as c,u as b,P as xe,F as C,a8 as D,n as k,K as q,U as P,J as A,a3 as Ie,aU as _}from"./@vue-CRXw13tJ.js";import{j as B}from"./jsplumb-BSlU-ebA.js";import{S as Le}from"./sortablejs-BS5toX6s.js";import{s as Ce}from"./pinia-3Y-g9T3w.js";import{c as De}from"./commonFunction-mVoC85nE.js";import{a as h,E as Pe}from"./element-plus-DWwQNvQX.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-router-CMApDvaE.js";import"./vue-i18n-UifYAxCp.js";import"./@intlify-COHHyPI8.js";import"./vue-CvYTPyMZ.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-CaTblHBU.js";import"./nprogress-Bx-CsPDi.js";import"./axios-Cm0UX6qg.js";import"./qs-Bc-_vL76.js";import"./side-channel-nON-R0av.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-CZY0DhK8.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CHRrmJ9o.js";import"./vue-demi-Dq6ymT-8.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-CFfwrCfM.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CphgU6An.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-FEUMNzka.js";import"./vue-clipboard3-BDi_pYGO.js";import"./clipboard-CsWFhlzi.js";import"./formatTime-in1fXasu.js";const Te=[{title:"工作流",icon:"iconfont icon-shouye",isOpen:!0,id:"1",children:[{icon:"iconfont icon-gongju",name:"引擎",id:"11",form:[{type:"input",label:"客户姓名",prop:"name",placeholder:"请输入客户姓名",required:!0,disabled:!1},{type:"select",label:"性别",prop:"sex",placeholder:"请选择性别",required:!0,disabled:!1,options:[{value:"0",label:"女"},{value:"1",label:"男"}]},{type:"input",label:"员工编号",prop:"number",placeholder:"请输入员工编号",required:!0,disabled:!1},{type:"input",label:"办公电话",prop:"mobile",placeholder:"请输入办公电话",required:!0,disabled:!1},{type:"select",label:"权限分配",prop:"role",placeholder:"请选择性别",required:!0,disabled:!1,options:[{value:"0",label:"编辑权限"},{value:"1",label:"删除权限"}]},{type:"checkbox",label:"模块选择",prop:"module",placeholder:"请选择模块",required:!0,disabled:!1}]},{icon:"iconfont icon-shouye_dongtaihui",name:"模版",id:"12",form:[{type:"input",label:"等级",prop:"grade",placeholder:"请输入等级",required:!0,disabled:!1},{type:"input",label:"登记密码",prop:"password",placeholder:"请输入登记密码",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshuchaxun",name:"名称",id:"13",form:[{type:"input",label:"数据表",prop:"dataSheet",placeholder:"请输入数据表",required:!0,disabled:!1},{type:"input",label:"字段配置",prop:"field",placeholder:"请输入字段配置",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshu",name:"版本",id:"14",form:[{type:"input",label:"发布模板",prop:"publish",placeholder:"请输入发布模板",required:!0,disabled:!1}]},{icon:"iconfont icon-bolangnengshiyanchang",name:"建模",id:"15",form:[{type:"input",label:"内容模板",prop:"content",placeholder:"请输入内容模板",required:!0,disabled:!1}]},{icon:"iconfont icon-xingqiu",name:"节点",id:"16",form:[{type:"input",label:"活动名称6",prop:"name16"}]}]},{title:"流程",isOpen:!0,icon:"iconfont icon-caijian",id:"2",children:[{icon:"iconfont icon-fuwenben",name:"实例",id:"21",form:[{type:"input",label:"活动名称7",prop:"name21"}]},{icon:"iconfont icon-fuwenbenkuang",name:"轨迹",id:"22",form:[{type:"input",label:"活动名称8",prop:"name22"}]},{icon:"iconfont icon-shangchuan",name:"数据",id:"23",form:[{type:"input",label:"活动名称9",prop:"name23"}]}]},{title:"任务",isOpen:!0,icon:"iconfont icon-shuju",id:"3",children:[{icon:"iconfont icon-icon-",name:"参与人",id:"31",form:[{type:"input",label:"活动名称1",prop:"name31"}]},{icon:"iconfont icon-gerenzhongxin",name:"执行人",id:"32",form:[{type:"input",label:"活动名称2",prop:"name32"}]},{icon:"iconfont icon-fangkuang",name:"工单",id:"33",form:[{type:"input",label:"活动名称3",prop:"name33"}]}]}],Se={Anchors:["Top","TopCenter","TopRight","TopLeft","Right","RightMiddle","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Container:"workflow-right",Connector:["Bezier",{curviness:100}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoint:["Blank",{Overlays:""}],EndpointStyle:{fill:"#1879ffa1",outlineWidth:1},LogEnabled:!0,PaintStyle:{stroke:"#E0E3E7",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},DragOptions:{cursor:"pointer",zIndex:2e3},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}],["Label",{label:"",location:.5,cssClass:"aLabel"}]],RenderMode:"svg",HoverPaintStyle:{stroke:"#b0b2b5",strokeWidth:1},EndpointHoverStyle:{fill:"red"},Scope:"jsPlumb_DefaultScope"},ve={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,maxConnections:-1},Re={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,dropOptions:{hoverClass:"ef-drop-hover"}},E={isSource:!0,isTarget:!0,anchor:"Continuous"},Ne={class:"workflow-container layout-padding"},Oe={key:0,class:"workflow-mask"},Me={class:"layout-padding-auto layout-padding-view workflow-warp"},ze={class:"workflow"},qe={class:"workflow-content"},Ae={class:"workflow-left"},Be=["onClick"],$e=["data-name","data-icon","data-id"],Ve={class:"workflow-left-item-icon"},We={class:"font10 pl5 name"},Fe=["id","data-node-id","onClick","onContextmenu"],Je={class:"workflow-left-item-icon"},He={class:"font10 pl5 name"},Ue=$({name:"pagesWorkflow"}),Xe=$({...Ue,setup(Ye){const V=_(()=>g(()=>import("./index-DtDxiKTR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]))),T=_(()=>g(()=>import("./index-GnCwDMVb.js"),__vite__mapDeps([44,3,42,45]))),W=_(()=>g(()=>import("./index-D8wnD-Jt.js"),__vite__mapDeps([46,4,3,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]))),F=_(()=>g(()=>import("./help-bY6Nrk7z.js"),__vite__mapDeps([47,3]))),S=f([]),v=f(),R=f(),N=f(),j=f(),O=f(),J=we(),H=ge(),{themeConfig:U}=Ce(H),{copyText:X}=De(),e=ke({leftNavList:[],dropdownNode:{x:"",y:""},dropdownLine:{x:"",y:""},isShow:!1,jsPlumb:null,jsPlumbNodeIndex:null,jsplumbDefaults:Se,jsplumbMakeSource:ve,jsplumbMakeTarget:Re,jsplumbConnect:E,jsplumbData:{nodeList:[],lineList:[]}}),y=()=>{document.body.clientWidth<768?e.isShow=!0:e.isShow=!1},Y=()=>{e.leftNavList=Te,e.jsplumbData={nodeList:[{nodeId:"huej738hbji",left:"148px",top:"93px",class:"workflow-right-clone",icon:"iconfont icon-gongju",name:"引擎",id:"11"},{nodeId:"52kcszzyxrd",left:"458px",top:"203px",class:"workflow-right-clone",icon:"iconfont icon-shouye_dongtaihui",name:"模版",id:"12"},{nodeId:"nltskl6k4me",left:"164px",top:"350px",class:"workflow-right-clone",icon:"iconfont icon-zhongduancanshuchaxun",name:"名称",id:"13"}],lineList:[{sourceId:"huej738hbji",targetId:"52kcszzyxrd",label:"传送"},{sourceId:"huej738hbji",targetId:"nltskl6k4me",label:""}]}},K=()=>{S.value.forEach(o=>{Le.create(o,{group:{name:"vue-next-admin-1",pull:"clone",put:!1},animation:0,sort:!1,draggable:".workflow-left-item",forceFallback:!0,onEnd:function(i){const{name:n,icon:s,id:t}=i.clone.dataset,{layerX:l,layerY:a,clientX:d,clientY:m}=i.originalEvent,me=v.value,{x:M,y:x,width:fe,height:be}=me.getBoundingClientRect();if(d<M||d>fe+M||m<x||x>x+be)h.warning("请把节点拖入到画布中");else{const w=Math.random().toString(36).substr(2,12),he={nodeId:w,left:`${l-40}px`,top:`${a-15}px`,class:"workflow-right-clone",name:n,icon:s,id:t};e.jsplumbData.nodeList.push(he),k(()=>{e.jsPlumb.makeSource(w,e.jsplumbMakeSource),e.jsPlumb.makeTarget(w,e.jsplumbMakeTarget,E),e.jsPlumb.draggable(w,{containment:"parent",stop:I=>{e.jsplumbData.nodeList.forEach(L=>{L.nodeId===I.el.id&&(L.left=`${I.pos[0]}px`,L.top=`${I.pos[1]}px`)})}})})}}})})},Z=()=>{B.jsPlumb.ready(()=>{e.jsPlumb=B.jsPlumb.getInstance({detachable:!1,Container:"workflow-right"}),e.jsPlumb.fire("jsPlumbDemoLoaded",e.jsPlumb),e.jsPlumb.importDefaults(e.jsplumbDefaults),e.jsPlumb.setSuspendDrawing(!1,!0),G(),e.jsPlumb.bind("contextmenu",(o,i)=>{i.preventDefault();const{sourceId:n,targetId:s}=o,{clientX:t,clientY:l}=i;e.dropdownLine.x=t,e.dropdownLine.y=l;const a=e.jsplumbData.nodeList.find(m=>m.nodeId===s),d=e.jsplumbData.lineList.find(m=>m.sourceId===n&&m.targetId===s);a.type="line",a.label=d.label,N.value.openContextmenu(a,o)}),e.jsPlumb.bind("beforeDrop",o=>{const{sourceId:i,targetId:n}=o;return e.jsplumbData.lineList.find(t=>t.sourceId===i&&t.targetId===n)?(h.warning("关系已存在，不可重复连接"),!1):!0}),e.jsPlumb.bind("connection",o=>{const{sourceId:i,targetId:n}=o;e.jsplumbData.lineList.push({sourceId:i,targetId:n,label:""})}),e.jsPlumb.bind("connectionDetached",o=>{const{sourceId:i,targetId:n}=o;e.jsplumbData.lineList=e.jsplumbData.lineList.filter(s=>!(s.sourceId==i&&s.targetId==n))})})},G=()=>{e.jsplumbData.nodeList.forEach(o=>{e.jsPlumb.makeSource(o.nodeId,e.jsplumbMakeSource),e.jsPlumb.makeTarget(o.nodeId,e.jsplumbMakeTarget,E),e.jsPlumb.draggable(o.nodeId,{containment:"parent",stop:i=>{e.jsplumbData.nodeList.forEach(n=>{n.nodeId===i.el.id&&(n.left=`${i.pos[0]}px`,n.top=`${i.pos[1]}px`)})}})}),e.jsplumbData.lineList.forEach(o=>{e.jsPlumb.connect({source:o.sourceId,target:o.targetId,label:o.label},e.jsplumbConnect)})},Q=o=>{o.isOpen=!o.isOpen},ee=o=>{e.jsPlumbNodeIndex=o},oe=(o,i,n)=>{e.jsPlumbNodeIndex=i;const{clientX:s,clientY:t}=n;e.dropdownNode.x=s,e.dropdownNode.y=t,o.type="node",o.label="";let l={};e.leftNavList.forEach(a=>{a.children&&a.children.find(d=>d.id===o.id)&&(l=a.children.find(d=>d.id===o.id))}),o.from=l.form,R.value.openContextmenu(o)},te=o=>{const{contextMenuClickId:i,nodeId:n}=o;if(i===0){const s=e.jsplumbData.nodeList.findIndex(t=>t.nodeId===n);e.jsplumbData.nodeList.splice(s,1),e.jsPlumb.removeAllEndpoints(n),e.jsPlumbNodeIndex=null}else i===1&&j.value.open(o)},ne=(o,i)=>{const{contextMenuClickId:n}=o,{endpoints:s}=i,t=[];s.forEach(l=>{t.push({id:l.element.id,innerText:l.element.innerText})}),o.contact=`${t[0].innerText}(${t[0].id}) => ${t[1].innerText}(${t[1].id})`,n===0?e.jsPlumb.deleteConnection(i):n===1&&j.value.open(o,i)},ie=o=>{const{sourceId:i,targetId:n,label:s}=o,t=e.jsPlumb.getConnections({source:i,target:n})[0];t.setLabel(s),!s||s===""?t.addClass("workflow-right-empty-label"):(t.removeClass("workflow-right-empty-label"),t.addClass("workflow-right-label")),e.jsplumbData.lineList.forEach(l=>{l.sourceId===i&&l.targetId===n&&(l.label=s)})},le=o=>{const{nodeId:i,name:n,icon:s}=o;e.jsplumbData.nodeList.forEach(t=>{t.nodeId===i&&(t.name=n,t.icon=s)}),k(()=>{e.jsPlumb.setSuspendDrawing(!1,!0)})},se=o=>{switch(o){case"help":ae();break;case"download":re();break;case"submit":ce();break;case"copy":de();break;case"del":ue();break;case"fullscreen":pe();break}},ae=()=>{k(()=>{O.value.open()})},re=()=>{const{globalTitle:o}=U.value,i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e.jsplumbData,null,"	")),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download",`${o}工作流.json`),n.click(),n.remove(),h.success("下载成功")},ce=()=>{h.success("数据提交成功")},de=()=>{X(JSON.stringify(e.jsplumbData))},ue=()=>{Pe.confirm("此操作将清空画布，是否继续？","提示",{confirmButtonText:"清空",cancelButtonText:"取消"}).then(()=>{e.jsplumbData.nodeList.forEach(o=>{e.jsPlumb.removeAllEndpoints(o.nodeId)}),k(()=>{e.jsplumbData={nodeList:[],lineList:[]},h.success("清空画布成功")})}).catch(()=>{})},pe=()=>{J.setCurrenFullscreen(!0)};return _e(async()=>{await Y(),K(),Z(),y(),window.addEventListener("resize",y)}),je(()=>{window.removeEventListener("resize",y)}),(o,i)=>{const n=z("SvgIcon"),s=z("el-scrollbar");return u(),p("div",Ne,[e.isShow?(u(),p("div",Oe)):ye("",!0),r("div",Me,[r("div",ze,[c(b(V),{onTool:se}),r("div",qe,[r("div",Ae,[c(s,null,{default:xe(()=>[(u(!0),p(C,null,D(e.leftNavList,t=>(u(),p("div",{ref_for:!0,ref_key:"leftNavRefs",ref:S,key:t.id,style:q({height:t.isOpen?"auto":"50px",overflow:"hidden"}),class:"workflow-left-id"},[r("div",{class:"workflow-left-title",onClick:l=>Q(t)},[r("span",null,P(t.title),1),c(n,{name:t.isOpen?"ele-ArrowDown":"ele-ArrowRight"},null,8,["name"])],8,Be),(u(!0),p(C,null,D(t.children,(l,a)=>(u(),p("div",{class:"workflow-left-item",key:a,"data-name":l.name,"data-icon":l.icon,"data-id":l.id},[r("div",Ve,[c(n,{name:l.icon,class:"workflow-icon-drag"},null,8,["name"]),r("div",We,P(l.name),1)])],8,$e))),128))],4))),128))]),_:1})]),r("div",{class:"workflow-right",ref_key:"workflowRightRef",ref:v},[(u(!0),p(C,null,D(e.jsplumbData.nodeList,(t,l)=>(u(),p("div",{key:t.nodeId,id:t.nodeId,"data-node-id":t.nodeId,class:A(t.class),style:q({left:t.left,top:t.top}),onClick:a=>ee(l),onContextmenu:Ie(a=>oe(t,l,a),["prevent"])},[r("div",{class:A(["workflow-right-box",{"workflow-right-active":e.jsPlumbNodeIndex===l}])},[r("div",Je,[c(n,{name:t.icon,class:"workflow-icon-drag"},null,8,["name"]),r("div",He,P(t.name),1)])],2)],46,Fe))),128))],512)])])]),c(b(T),{dropdown:e.dropdownNode,ref_key:"contextmenuNodeRef",ref:R,onCurrent:te},null,8,["dropdown"]),c(b(T),{dropdown:e.dropdownLine,ref_key:"contextmenuLineRef",ref:N,onCurrent:ne},null,8,["dropdown"]),c(b(W),{ref_key:"drawerRef",ref:j,onLabel:ie,onNode:le},null,512),c(b(F),{ref_key:"helpRef",ref:O},null,512)])}}}),Wo=Ee(Xe,[["__scopeId","data-v-1f67fc9a"]]);export{Wo as default};
